generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
  id             String    @id @default(uuid())
  email          String    @unique
  name           String
  pfpUrl         String
  projects       Project[]
  SharedProjects Project[] @relation("Invited To")
}

model Project {
  id            String      @id @default(uuid())
  name          String
  ownerId       String
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  db_name       String      @unique
  db_pwd        String
  db_user       String      @unique
  owner         User        @relation(fields: [ownerId], references: [id])
  sqlfolders    SqlFolder[]
  sqlqueries    sql[]
  collaborators User[]      @relation("Invited To")
}

model SqlFolder {
  id        String  @id @default(uuid())
  projectId String
  name      String
  project   Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
  queries   sql[]
}

model sql {
  id        String     @id @default(uuid())
  projectId String
  folderId  String?
  createdAt DateTime   @default(now())
  name      String
  query     String
  folder    SqlFolder? @relation(fields: [folderId], references: [id])
  project   Project    @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model sso_providers {
  name     String  @id
  img_path String? @unique
}
